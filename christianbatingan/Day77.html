

<!DOCTYPE html>
<html>
    <head>
        <title>Day 77</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
        <link href="http://saasmath.seattleacademy.org/css/bootstrap.css" rel="stylesheet">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>

        <script>

            aliensong =
                    [[1046, 100],
                        [1108, 100],
                        [1174, 100],
                        [1244.5, 100],
                        [1318.5, 100],
                        [1046, 100]];

            $(document).ready(function() {
                var socket = io.connect('http://10.48.102.117:3001');
                socket.on('sensordata', function(data) {
                    //console.log(data);
                    $("#voltage").text(data.battery.voltage.volts);
                    $("#left").text(data.cliff_sensors.left.signal.raw);
                    $("#front_left").text(data.cliff_sensors.front_left.signal.raw);
                    $("#front_right").text(data.cliff_sensors.front_right.signal.raw);
                    $("#right").text(data.cliff_sensors.right.signal.raw);
                    //$("#allsensors").text(JSON.stringify(data));
                    socket.emit('sensorswritten');
                });


                $("#forward").click(function(e) {
                    console.log('forward');
                    socket.emit('drive', {left: 40, right: 40});
                });
                $("#turnright").click(function(e) {
                    console.log('turnright');
                    socket.emit('drive', {left: -40, right: 40});
                });
                $("#turnleft").click(function(e) {
                    console.log('turnleft');
                    socket.emit('drive', {left: 40, right: -40});
                });
                $("#backward").click(function(e) {
                    console.log('backward');
                    socket.emit('drive', {left: -40, right: -40});
                });

                $("#stop").click(function(e) {
                    console.log('stop');
                    socket.emit('drive', {left: 0, right: 0});
                });
                $("#go").click(function(e) {
                    console.log('go');
                    socket.emit('drive', {left: 50, right: 50});
                });

                $("#alien").click(function(e) {
                    socket.emit('sing', aliensong);
                });

                $("#safeMode").click(function(e) {
                    socket.emit('safeMode');
                });

                $("#fullMode").click(function(e) {
                    socket.emit('fullMode');
                });


                $('body').keydown(function(event) {
                    console.log(event.which);
                    speed = $("#speed").val();
                    //speed = 100;
                    if (event.which === 87) //w - move forward
                        socket.emit('drive', {left: speed, right: speed});

                    if (event.which === 83) //s - move backward
                        socket.emit('drive', {left: -speed, right: -speed});

                    if (event.which === 65) //a - move right
                        socket.emit('drive', {left: speed, right: -speed});

                    if (event.which === 68) //a - move left
                        socket.emit('drive', {left: -speed, right: speed});

                    if (event.which === 32) //space - stop
                        socket.emit('drive', {left: 0, right: 0});

                });


            });
        </script>

    </head>
    <body>
        <div class="container">
            <h3>Robot Control</h3>
            <div class ="row">
                <button data-command = "131" class="btn-warning btn col-xs-2" id="safeMode">Safe Mode</button>
                <button data-command = "132" class="btn-danger btn col-xs-3" id="fullMode">Full Mode</button>

            </div>
            <div class ="row">
                <div class="col-xs-3">
                    <button data-command = "145,0,0,0,0" class="btn btn-danger" id="stop">Stop</button>
                    <button data-command = "145,0,50,0,50" class="btn btn-primary" id="go">Go</button>
                </div>
            </div>
            <div class="row">  
                <div class="col-md-2 col-md-offset-5">
                    <button data-command = "145,0,100,0,100" class="btn-primary btn-lg btn-block" id="forward">Forward<span class="glyphicon glyphicon-arrow-up"></span></button> 
                </div> 
            </div>  
            <div class="row">  
                <div class="col-md-2 col-md-offset-3">
                    <button data-command = "145,0,130,255,236" class="btn-primary btn-lg btn-block" id="turnleft">Left<span class="glyphicon glyphicon-arrow-left"></span></button> 
                </div>  
                <div class="col-md-2 col-md-offset-2">
                    <button data-command = "145,0,0,0,130" class="btn-primary btn-lg btn-block" id="turnright">Right<span class="glyphicon glyphicon-arrow-right"></span></button> 
                </div> 
            </div>  
            <div class="row">  
                <div class="col-md-2 col-md-offset-5">
                    <button data-command = "145,255,226,0,40" class="btn-primary btn-lg btn-block" id="backward">Backward<span class="glyphicon glyphicon-arrow-down"></span></button> 
                </div> 
                <button id ="playmusica" data-command="140,0,18,60,8,60,8,60,8,77,141,0" class="btn-success btn-lg btn-block">Play Music
                    <span class="glyphicon glyphicon-music"></span></button>

            </div> 
            <div class="alert alert-info wordwrap" id="left">Sensors ...</div>
            <div class="row">
                <button id="alien">alien</button>
                Voltage  <span id="voltage">...</span>
                Speed: <input type="text" id="speed" value="100">
            </div>
            <div>left  <span id="left">...</span>
                front_left  <span id="front_left">...</span>
                front_right <span id="front_right">...</span>
                right  <span id="right">...</span>
            </div>
            <div id="allsensors">...</div>
        </div>
    </body>
</html>
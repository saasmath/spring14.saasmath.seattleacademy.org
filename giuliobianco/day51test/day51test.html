<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>

        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <script src="../../js/jquery.js"></script>

        <script>
            /**
             * Example 2 is similar to Example 1. Two things that are
             * different are counting down instead of up and allowing
             * user input for start time. Also, when the timer counts
             * down to zero, an alert is triggered.
             */
            var Example2 = new (function() {

                var $countdown;
                var $form;
                var incrementTime = 70;
                var currentTime = 300000; // 5 minutes (in milliseconds)

                $(function() {

                    // Setup the timer
                    $countdown = $('#countdown');
                    Example2.Timer = $.timer(updateTimer, incrementTime, true);

                    // Setup form
                    $form = $('#example2form');
                    $form.bind('submit', function() {
                        Example2.resetCountdown();
                        return false;
                    });

                });

                function updateTimer() {

                    // Output timer position
                    var timeString = formatTime(currentTime);
                    $countdown.html(timeString);

                    // If timer is complete, trigger alert
                    if (currentTime == 0) {
                        Example2.Timer.stop();
                        alert('Example 2: Countdown timer complete!');
                        Example2.resetCountdown();
                        return;
                    }

                    // Increment timer position
                    currentTime -= incrementTime;
                    if (currentTime < 0)
                        currentTime = 0;

                }

                this.resetCountdown = function() {

                    // Get time from form
                    var newTime = parseInt($form.find('input[type=text]').val()) * 1000;
                    if (newTime > 0) {
                        currentTime = newTime;
                    }

                    // Stop and reset timer
                    Example2.Timer.stop().once();

                };

            });
        </script>
    </head>
    <body>
        <div id="Example2">15:00</div>
    </body>
</html>
